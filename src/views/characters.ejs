<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Characters</title>
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="stylesheet" href="/styles/characters.css">
</head>
<body>
    <div class="container">
        <h2>My Characters</h2>
    
        <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ Leaderboard -->
        <a href="/leaderboard/view" class="leaderboard-button">üèÜ Leaderboard</a>

        <!-- –í—ã–≤–æ–¥ flash-—Å–æ–æ–±—â–µ–Ω–∏–π -->
<% if (success) { %>
    <div class="alert alert-success"><%= success %></div>
<% } %>
<% if (error) { %>
    <div class="alert alert-danger"><%= error %></div>
<% } %>
    
        <!-- –°–ø–∏—Å–æ–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π -->
        <ul class="character-list">
            <% characters.forEach(character => { %>
                <li class="character-item">
                    <div class="character-avatar <%= character.class.toLowerCase() %>"></div>
                    <div class="character-info">
                        <strong><%= character.name %></strong> (Level: <%= character.level %>)
                    </div>
                    <form action="/characters/<%= character._id %>?_method=DELETE" method="POST">
                        <input type="hidden" name="_csrf" value="<%= _csrf %>">
                        <button type="submit" class="button delete-button">Delete</button>
                    </form>                                       
                </li>
            <% }); %>
        </ul>

        <!-- –§–æ—Ä–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ -->
        <h3>Create New Character</h3>
        <form action="/characters/create" method="POST">
            <input type="hidden" name="_csrf" value="<%= _csrf %>">
            
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required>
            
            <label for="class">Class:</label>
            <select id="class" name="class">
                <option value="Warrior">Warrior</option>
                <option value="Mage">Mage</option>
                <option value="Ranger">Ranger</option>
            </select>

            <button type="submit" class="button">Create</button>
        </form>

        <!-- –î–æ—Å—Ç—É–ø–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è -->
        <h3>Available Quests</h3>

        <% if (quests && quests.length) { %>
            <div class="quest-container">
                <% quests.forEach(quest => { %>
                    <div class="quest-card">
                        <h3><%= quest.title %></h3>
                        <p><strong>Reward:</strong> <%= quest.gold %> Gold</p>
                        <form action="/quests/take/<%= quest._id %>" method="POST">
                            <input type="hidden" name="_csrf" value="<%= _csrf %>">
                            <button type="submit" class="quest-button">Take Quest</button>
                        </form>
                    </div>
                <% }); %>
            </div>
        <% } else { %>
            <p>No quests available.</p>
        <% } %>
        

        <a href="/logout" class="button logout-button">Logout</a>
    </div>
</body>
</html>
